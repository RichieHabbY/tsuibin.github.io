<!DOCTYPE html>
<html>
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description" content="">
    <meta name="author" content="">
    
    <title>Uliweb Zone - 教程 - 一步一步学内核(Linux kernel) - 内核模块之锁、信号量</title>
    <!-- toplinks -->
<script type="text/javascript" src="/static/jquery/jquery-1.7.2.min.js?ver=2"></script>
<script type="text/javascript" src="/static/jsutils/json2.js?ver=2"></script>
<!--[if lt IE 9]>
<script type="text/javascript" src="/static/bootstrap/asset/html5.js?ver=2"></script>
<![endif]-->
<link rel="stylesheet" type="text/css" href="/static/bootstrap/2.2.0/bootstrap.min.css?ver=2"/>
<script type="text/javascript" src="/static/bootstrap/2.2.0/js/bootstrap.min.js?ver=2"></script>
<link rel="stylesheet" type="text/css" href="/static/bootstrap_extend.css?ver=2"/>
<link rel="stylesheet" type="text/css" href="/static/jquery/ui/css/redmond/jquery-ui-1.8.16.custom.css?ver=2"/>
<link rel="stylesheet" type="text/css" href="/static/pnotify/1.2.0/jquery.pnotify.default.css?ver=2"/>
<link rel="stylesheet" type="text/css" href="/static/pnotify/1.2.0/jquery.pnotify.default.icons.css?ver=2"/>
<script type="text/javascript" src="/static/pnotify/1.2.0/jquery.pnotify.min.js?ver=2"></script>
<link rel="stylesheet" type="text/css" href="/static/bootheme/bootheme.css?ver=2"/>
<link rel="stylesheet" type="text/css" href="/static/tutorials/tutorials.css?ver=2"/>
<link rel="stylesheet" type="text/css" href="/static/poshytip/tip-twitter/tip-twitter.css?ver=2"/>
<link rel="stylesheet" type="text/css" href="/static/poshytip/tip-yellow/tip-yellow.css?ver=2"/>
<link rel="stylesheet" type="text/css" href="/static/poshytip/tip-yellowsimple/tip-yellowsimple.css?ver=2"/>
<script type="text/javascript" src="/static/poshytip/jquery.poshytip.js?ver=2"></script>
<script type="text/javascript" src="/static/jquery/ui/js/jquery-ui-1.8.16.custom.min.js?ver=2"></script>
<script type="text/javascript" src="/static/jquery/ui/js/jquery.ui.datepicker.zh.js?ver=2"></script>
<link rel="stylesheet" type="text/css" href="/static/bootstrap/asset/prettify.css?ver=2"/>
<script type="text/javascript" src="/static/bootstrap/asset/prettify.js?ver=2"></script>
<link rel="stylesheet" type="text/css" href="/static/pageslide/jquery.pageslide.css?ver=2"/>
<script type="text/javascript" src="/static/jqutils/jquery.form.js?ver=2"></script>
<link rel="stylesheet" type="text/css" href="/static/jqutils/jqutils.css?ver=2"/>
<script type="text/javascript" src="/static/jqutils/jqrselect.js?ver=2"></script>
<script type="text/javascript" src="/static/jqutils/jqutils.js?ver=2"></script>
<link rel="stylesheet" type="text/css" href="/static/toc/toc.css?ver=2"/>
<link rel="stylesheet" type="text/css" href="/static/bootstrap/fontawesome/css/font-awesome.css?ver=2"/>
<!--[if IE 7]>
  <link rel="stylesheet" href="/static/bootstrap/fontawesome/css/font-awesome-ie7.css">
<![endif]-->

<script type="text/javascript" src="/static/tutorials/comment.js?ver=2"></script>
<link rel="stylesheet" type="text/css" href="/static/jqutils/ui.totop.css?ver=2"/>
<script type="text/javascript" src="/static/jqutils/jquery.ui.totop.js?ver=2"></script>
<script type="text/javascript" src="/static/jqutils/jquery.hotkeys.js?ver=2"></script>
    
    
  </head>

<body class="bootstrap-body">









<script type="text/javascript">
$.extend($.pnotify.defaults, {"styling":"bootstrap"});
var show_message = function(message, category){
    $.pnotify({
        //pnotify_title: 'Regular Notice',
        pnotify_history: false,
        pnotify_text: message,
        pnotify_type: category || 'success',
        pnotify_animation: 'fade',
        pnotify_before_open: function(pnotify){
           // Position this notice in the center of the screen.
           pnotify.css({
               "top": 1,
               "left": ($(top.window).width() / 2) - (pnotify.width() / 2)
           });
        }
    });
}

$(function(){
    
});
</script>


<script>
// using jQuery
function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie != '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = jQuery.trim(cookies[i]);
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) == (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}

function csrfSafeMethod(method) {
    // these HTTP methods do not require CSRF protection
    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
}
$.ajaxSetup({
    crossDomain: false, // obviates need for sameOrigin test
    beforeSend: function(xhr, settings) {
        if (!csrfSafeMethod(settings.type)) {
            xhr.setRequestHeader("X-CSRFToken", getCookie('_csrf_token'));
        }
    }
});
</script>




<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container-fluid">
      <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
      <a class="brand" href="#">Uliweb Zone</a>
      <div class="nav-collapse">
        
<ul class="nav">
    
<li><a href="/"><span>Home</span></a></li><li><a href="/forum"><span>Forum</span></a></li><li class="active"><a href="/tutorial"><span>Tutorial</span></a></li><li><a href="/class"><span>Class</span></a></li><li><a href="/user/view"><span>Admin</span></a></li><li><a href="/about"><span>About</span></a></li>



</ul>

      
<style>
#userinfo.btn-toolbar {margin-top:0;margin-bottom:0;font-size:14px;}
#userinfo.btn-toolbar a{vertical-align:middle;}
#userinfo img {
-webkit-border-radius: 3px;
   -moz-border-radius: 3px;
        border-radius: 3px;
}
#userinfo [class^="icon-"], #userinfo [class*=" icon-"], #userinfo [class^="icon-"]:hover, #userinfo [class*=" icon-"]:hover{
    vertical-align:middle;
    margin-bottom:3px;
}
</style>
    

    
        <p class="pull-right user_info">
            <a href="/login">登录</a> | <a href="/register">注册</a>
        </p>
    

    
        
    

      </div><!--/.nav-collapse -->
    </div>
  </div>
</div>

    















<style>
#pageslide {
width:320px;
}
#toc {width:22%;}
/* scrollbar  */
.nano .content      { padding: 10px; }
.nano .pane         { background: #999; }
.nano .pane .slider { background: #111; }

</style>
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span12">
            <ul class="breadcrumb">
              <li>
                <a href="/tutorial">返回</a> <span class="divider">/</span>
              </li>
              <li>
                <a href="/tutorial/read/11.html">一步一步学内核(Linux kernel)</a> <span class="divider">/</span>
              </li>
              <li class="active">
                内核模块之锁、信号量
              </li>
            </ul>
        </div>
    </div>
    <div class="row-fluid">
        <div class="span9" id="article">
            <!-- Prompt IE 6 users to install Chrome Frame. Remove this if you support IE 6.
      chromium.org/developers/how-tos/chrome-frame-getting-started -->
 <!--[if lt IE 8]><div class="alert alert-info">Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</div><![endif]-->

            <div class="outter">
                <div class="chapter-prev chapter-top animated">
                    <a prev-chapter href="/tutorial/view_chapter/86.html"><i class="icon-arrow-left"></i> 2.10 内核模块之内存分配</a>
                </div>
                <div class="chapter-next chapter-top animated">
                    <a next-chapter href="/tutorial/view_chapter/88.html">2.12 内核模块之系统调用 <i class="icon-arrow-right"></i></a>
                </div>
                <div class="expander">&raquo;</div>
                <div class="content-inner rounded_bottom article">
                    <h1>内核模块之锁、信号量</h1>
                    <div style="margin-top:-10px;margin-bottom:20px;">
                        <!-- 评论 <a id="global-comment-count" href="/tutorial/view_paragraph_comments/87?para=0" class="para-comments-count active right animated">0</a> -->
                            <span class="gray">valley 于 2012-09-21 07:11:58+00:00 更新</span>
                            <span class="label label-info">访问次数：359</span>
                        
                    </div>
                    
                    
                
                    <blockquote><p>本文将为你介绍内核同步算法中的自旋锁和信号量。在这之前，先了解一些概念。</p>
<p>执行线程：thread of execution，指任何正在执行的代码实例，可能是一个正在内核线程，</p>
<p>一个中断处理程序等。有时候会将执行线程简称为线程。</p>
<p>临界区：critical region，即访问和操作共享数据的代码段。</p>
<p>多个执行线程并发访问同一资源通常是不安全的，通常使用自旋锁和信号量来实现对临界区互斥的访问。</p>
</blockquote>
<blockquote><h3 id="title_0.0.1">自旋锁</h3>
</blockquote>
<blockquote>
<p>自旋锁(spin lock)是一个对临界资源进行互斥访问的典型手段。自旋锁至多只能被一个执行线程持有。</p>
<p>当一个执行线程想要获得一个已被使用的自旋锁时，该线程就会一直进行忙等待直至该锁被释放，</p>
<p>就如同“自旋”所表达的意思那样：在原地打转。</p>
<p>我们也可以这么理解自旋锁：它如同一把门锁，而临界区就如同门后面的房间。</p>
<p>当一个线程A进入房间后，它会关闭房门，使得其他线程不得进入。</p>
<p>此时如果其他某个进程B需要进入房间，那么只能在门外“打转”。当A进程打开们后，进程B才能进入房间。</p>
<p>自旋锁的使用</p>
<p>1.定义初始化自旋锁</p>
<p>使用下面的语句就可以先定一个自旋锁变量，再对其进行初始化：</p>
</blockquote>
<pre class="prettyprint linenums pre-scrollable"><code>	spinlock_t lock;
	spin_lock_init(&amp;lock);</code></pre>
<blockquote>
<p>也可以这样初始化一个自旋锁：</p>
</blockquote>
<pre class="prettyprint linenums pre-scrollable"><code>	spinlock_t lock=SPIN_LOCK_UNLOCKED;</code></pre>
<blockquote>
<p>2.获得自旋锁</p>
</blockquote>
<pre class="prettyprint linenums pre-scrollable"><code>	void spin_lock(spinlock_t*);
	int spin_trylock(spinlock_t*);</code></pre>
<blockquote>
<p>使用spin<em>lock(&amp;lock)这样的语句来获得自旋锁。如果一个线程可以获得自旋锁，它将马上返回；</p>
<p>否则，它将自旋至自旋锁的保持者释放锁。</p>
<p>另外可以使用spin<em>trylock(&amp;lock)来试图获得自旋锁。</p>
<p>如果一个线程可以立即获得自旋锁，则返回真；否则，返回假，此时它并不自旋。</p>
<p>3.释放自旋锁</p>
</blockquote>
<pre class="prettyprint linenums pre-scrollable"><code>	void spin_unlock(spinlock_t*);</code></pre>
<blockquote>
<p>使用spin<em>unlock(&amp;lock)来释放一个已持有的自旋锁。</p>
<p>注意这个函数必须和spin<em>lock或spin</em>trylock函数配套使用。</p>
<p>关于自旋锁的说明</p>
<p>1.保护数据。我们使用锁的目的是保护临界区的数据而不是临界区的代码。</p>
<p>2.在使用自旋锁时候，必须关闭本地中断，否则可能出现双重请求的死锁。</p>
<p>比如，中断处理程序打断正持有自旋锁的内核代码，如果这个中断处理程序又需要这个自旋锁，</p>
<p>那么这个中断处理程序就会自旋等待自旋锁被释放；但是这个锁的持有者此刻被中断打断，</p>
<p>因此不可能在中断完毕之前释放锁。此时就出现了死锁。</p>
<p>3.自旋锁是忙等锁。正如同前面所说的那样，当其他线程持有自旋锁时，如果另有线程想获得该锁，</p>
<p>那么就只能循环的等待。这样忙的功能对CPU来说是极大的浪费。因此只有当由自旋锁保护的临界区执行时间很短时，</p>
<p>使用自旋锁才比较合理。</p>
<p>4.自旋锁不能递归使用。这一点也很好理解，如果当前持有锁的线程又需要再持有该锁，那么它必须自旋，</p>
<p>等待锁被释放；但是这个锁本身又被它自己持有，因此这个线程永远无法继续向前推进。</p>
</blockquote>
<blockquote><h3 id="title_0.0.1">信号量</h3>
</blockquote>
<blockquote><p>信号量（semaphore）是保护临界区的一种常用方法。它的功能与自旋锁相同，</p>
<p>只能在得到信号量的进程才能执行临界区的代码。但是和自旋锁不同的是，一个进程不能获得信号量时，</p>
<p>它会进入睡眠状态而不是自旋。</p>
<p>利用上述自旋锁的门和锁的例子，我们可以这样解释信号量。我们将信号量比作钥匙。</p>
<p>进程A想要进入房间，就必要持有一把钥匙。当钥匙被使用完之后，如果又有进程B想进房间，</p>
<p>那么这个进程在等待其他进程从房间出来给它钥匙的同时会打盹。</p>
<p>当房间里的某个进程出来时会摇醒这个睡觉的进程B。</p>
<p>信号量的使用</p>
<p>数据结构</p>
</blockquote>
<pre class="prettyprint linenums pre-scrollable"><code>	struct semaphore {
       spinlock_t              lock;
       unsigned int            count;
       struct list_head        wait_list;
       };</code></pre>
<blockquote>
<p>count：初始化信号量时所设置的信号量值。 wait_list：等待队列，该队列中即为等待信号量的进程。 lock：自旋锁变量</p>
<p>1.定义初始化信号量</p>
<p>使用下面的代码可以定义并初始化信号量sem：</p>
</blockquote>
<pre class="prettyprint linenums pre-scrollable"><code>struct semaphore sem;
sem_init(&amp;sem,val);</code></pre>
<blockquote>
<p>其中val即为信号量的初始值。</p>
<p>如果我们想使用互斥信号量，则使用下面的函数：</p>
</blockquote>
<pre class="prettyprint linenums pre-scrollable"><code>init_MUTEX(&amp;sem);</code></pre>
<blockquote>
<p>这个函数会将sem的值初始为1，即等同于sem<em>init(&amp;sem,1);</p>
<p>如果想将互斥信号量的初值设为0，则可以直接使用下面的函数：</p>
</blockquote>
<pre class="prettyprint linenums pre-scrollable"><code>init_MUTEX_LOCKED(&amp;sem);</code></pre>
<blockquote>
<p>除上面的方法，可以使用下面的两个宏定义并初始化信号量：</p>
</blockquote>
<pre class="prettyprint linenums pre-scrollable"><code>DECLARE_MUTEX(name);
DECLARE_MUTEX_LOCKED(name);</code></pre>
<blockquote>
<p>其中name为变量名。</p>
<p>2.获得信号量</p>
</blockquote>
<pre class="prettyprint linenums pre-scrollable"><code>down(&amp;sem);</code></pre>
<blockquote>
<p>进程使用该函数时，如果信号量值此时为0，则该进车会进入睡眠状态，因此该函数不能用于中断上下文中。</p>
</blockquote>
<pre class="prettyprint linenums pre-scrollable"><code>down_interruptibale(&amp;sem);</code></pre>
<blockquote>
<p>该函数与down函数功能类似，只不过使用down而睡眠的进程不能被信号所打断，</p>
<p>而使用down<em>interruptibale的函数则可以被信号打断。</p>
<p>如果想要在中断上下文使用信号量，则可以使用下面的函数：</p>
</blockquote>
<pre class="prettyprint linenums pre-scrollable"><code>dwon_try(&amp;sem);</code></pre>
<blockquote>
<p>使用该函数时，如果进程可以获得信号量，则返回0；否则返回非0值，不会导致睡眠。</p>
<p>3.释放信号量</p>
</blockquote>
<pre class="prettyprint linenums pre-scrollable"><code>up(&amp;sem);</code></pre>
<blockquote>
<p>该函数会释放信号量，如果此时等待队列中有进程，则唤醒一个。 信号量的同步</p>
<p>信号量除了使进程互斥的访问临界区外，还可以用于进程间的同步。比如，当B进程执行完代码区C后，</p>
<p>A进程才会执行代码段D，两者之间有一定的执行顺序。</p>
<p>参考文章：</p>
<p><a href="http://edsionte.com/techblog/archives/1820">http://edsionte.com/techblog/archives/1820</a></p>
</blockquote>

                <!-- <hr/>
                    <div id="disqus_thread"></div>
                    <script type="text/javascript">
                       /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                       var disqus_shortname = 'uliwebzone'; // required: replace example with your forum shortname
            
                       /* * * DON'T EDIT BELOW THIS LINE * * */
                       (function() {
                           var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                           dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                           (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                       })();
                   </script>
                   <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                   <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
                -->
                    <div class="tutorial-footer">
                        <p>评论 <a id="global-comment-count" href="/tutorial/view_paragraph_comments/87?para=0" class="para-comments-count active right animated">0</a>
                            <span class="gray">valley 于 2012-09-21 07:11:58+00:00 更新</span>
                        </p>
                    </div>
                    
                    <!-- JiaThis Button BEGIN -->
<script type="text/javascript" src="http://v3.jiathis.com/code/jiathis_r.js?uid=1342595503212835&type=left&amp;btn=l1.gif" charset="utf-8"></script>
<!-- JiaThis Button END -->
<script src="http://mediaplayer.yahoo.com/js"></script>

                
                    <div class="alert alert-info">
                        <a href="#" class="close" data-dismiss="alert">&times;</a>
                        可以使用<i class="icon-arrow-left"></i>和<i class="icon-arrow-right"></i>来跳转到前一章节或后一章节。
                        还可以使用<b>回车</b>来扩展或缩小文章区域。<b>C</b>键打开评论，<b>ESC</b>关闭评论。
                    </div>
                
                    <div class="chapter-prev chapter-down animated">
                        <a prev-chapter href="/tutorial/view_chapter/86.html"><i class="icon-arrow-left"></i> 2.10 内核模块之内存分配</a>
                    </div>
                    <div class="chapter-next chapter-down animated">
                        <a next-chapter href="/tutorial/view_chapter/88.html">2.12 内核模块之系统调用 <i class="icon-arrow-right"></i></a>
                    </div>
                    
                </div>
                
            </div>
        </div>
        <div class="span3" id="right-side">
            
            <div id="toc-container" class="nano">
            <div id="toc" class="content"></div>
            </div>
        </div>
    </div>
</div>
<div id="para-comments" style="display:none;">
</div>
<style>
#toc {top:140px;}
</style>
<script>
    function viewport()
    {
        var e = window, a = 'inner';
        if ( !( 'innerWidth' in window ) )
        {
            a = 'client';
            e = document.documentElement || document.body;
        }
        return { width : e[ a+'Width' ] , height : e[ a+'Height' ] }
    }
    
    //滚动插件
    /*(function () {
      $.fn.anchorScroll = function (options) {
        var defaults = {
          speed: 1100,
          fx: "jswing",
          offset: 0
        };
        //var version =  "1.0";
        var options = $.extend(defaults, options);
        return $(this).each(function () {
          var element = this;
          $(element).click(function (event) {
            var elementClick = $(element).attr("href").replace(/\./g, '\\.');
            var destination = $(elementClick).offset().top - options.offset;
            $("html,body").animate({
              scrollTop: destination
            }, options.speed, options.fx);
            //Stop links default events
            event.preventDefault();
            return false;
          })
        })
      }
    })(jQuery);
    */
    

    $(function(){
        //实现代码高亮
        window.prettyPrint && prettyPrint();
        
        //増加标题探测
        //$('body').scrollspy({target:'#titles', offset:50});
        
        $.ajax({
            type:'GET',
            dateType:'json',
            url:'/tutorial/get_paragraph_comments_count/87',
            success:function(data){
                //増加气泡评论显示
                $('a.comment_point').each(function(index, el){
                    var id = $(el).attr('rel');
                    var count = id in data?data[id]:0;
                    var item = $('<a href="/tutorial/view_paragraph_comments/87?para=' + id + '" class="para-comments-count animated">'+count+'</a>')
                        .css({position:'absolute', left:'-50px'});
                    $(el).closest('p').prepend(item);
                });
                
                if (data['0']){
                    $('#global-comment-count').text(data['0']);
                }
                //处理pageslide
                $('a.para-comments-count').pageslide({
                    //'href':'#para-comments',
                    iframe:false,
                    direction:'right',
                    width: '400px',
                    onClick: function(e){
                        $('a.para-comments-count').removeClass('active');
                        $(this).addClass('active');
                        //处理toTop
                        reset_totop();
                    },
                    onClose: function(){
                        $('a.para-comments-count').removeClass('active');
                        //处理toTop
                        reset_totop();
                    }
                });
                
            }
        });
        /*
        $('p.tutorial_p').hover(function(e){
            $(this).find('a.para-comments-count').addClass('swing');
        }, function(e){
            $(this).find('a.para-comments-count').removeClass('swing');
        });
        */
        
        $('.chapter-prev, .chapter-next').hover(function(e){
            $(this).animate({opacity:1}, 500);
        }, function(e){
            $(this).animate({opacity:0.5}, 500);;
        });
        
        //増加限制目录区高度的处理
        //$('#titles').height(viewport().height - 160);
        
        //限定pageslide的高度
        //$('#pageslide').height(viewport().height - 160);
        //实现平滑滚动
        //$('#titles a').anchorScroll({offset:50});
        
        function setup_toc(){
            $('#toc').height(viewport().height - $('#toc').offset()['top'] - 40);
            $('#toc').toc({
                'selectors': 'h2,h3', //elements to use as headings
                'highlightOffset': 0, //offset to trigger the next headline
                'offset': 50
            });
        }
        
        setup_toc();
        
        $(window).resize(function(){
        	setup_toc();
        });
        
        
        //増加代码提示
        $('pre, .inline-tag').code_comment();
        
        //处理回到顶部显示
        $('.outter').UItoTop({ easingType: 'easeOutQuart', text:'<i class="icon-arrow-up"></i>回到顶部' });
        
        //处理动态滚动条
        //$("#toc-container").nanoScroller();
        
        //处理左键，右键前后翻页
        $(document).bind('keydown.left', function(){
            var el = $('a[prev-chapter]');
            if (el.length>0){
                el[0].click();
            }
        }).bind('keydown.right', function(){
            var el = $('a[next-chapter]');
            if (el.length>0){
                el[0].click();
            }
        }).bind('keydown.return', function(){
            $('.expander').click();
        }).bind('keydown.c', function(){
            $('a.para-comments-count').click();
        });
        
        function reset_totop(){
            var top = $('#toTop');
            var that = $('.outter');
            var left = $(that).outerWidth() + $(that).offset().left + 2;
            top.offset({left:left, bottom:10});
        }
        
        //处理expander事件，如果点击，则隐藏目录栏
        $('.expander').click({'opened':false}, function(e){
            if (!e.data.opened){
                $('#article').removeClass('span8').addClass('span12');
                $('#right-side').removeClass('span4').hide();
                e.data.opened = true;
                $(this).html('&laquo;');
            }else{
                $('#article').removeClass('span12').addClass('span8');
                $('#right-side').addClass('span4').show();
                e.data.opened = false;
                $(this).html('&raquo;');
            }
            //处理toTop
            reset_totop();
        });
        
    });
</script>



<div class="container">
  <footer class="row">
  
<p>
Uliweb
</p>

  </footer>
</div>
      


<!-- bottomlinks -->
<script>$.ajaxSetup({cache:false, traditional:true});</script>
<script type="text/javascript" src="/static/pageslide/jquery.pageslide.js?ver=2"></script>
<script type="text/javascript" src="/static/toc/toc.js?ver=2"></script>


  </body>
</html>
